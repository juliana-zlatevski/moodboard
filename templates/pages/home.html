{% extends 'base.html' %}

{% block title %}
Home
{% endblock title %}
    
{% block content %}
<h1>Welcome to MoodBoard!</h1>

<div id='posts'>
    Loading posts...
</div>

<script>
const postsDiv = document.getElementById('posts')

const xhr = new XMLHttpRequest()
const method = 'GET'
const endpoint = '/posts'
const responseType = 'json'

xhr.responseType = responseType
xhr.open(method, endpoint)
xhr.onload = function() {
    const serverResponse = xhr.response
    const postsList = serverResponse.response
    let finalPostStr = ""
    for (let i = 0; i < postsList.length; i++) {
        let currentPost = `<div class='tweet' id=${postsList[i].id}>
            <p>${postsList[i].content}</p></div>
            <button class='btn btn-outline-info btn-sm like-btn'>
                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-lightning" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd" d="M11.251.068a.5.5 0 0 1 .227.58L9.677 6.5H13a.5.5 0 0 1 .364.843l-8 8.5a.5.5 0 0 1-.842-.49L6.323 9.5H3a.5.5 0 0 1-.364-.843l8-8.5a.5.5 0 0 1 .615-.09zM4.157 8.5H7a.5.5 0 0 1 .478.647L6.11 13.59l5.732-6.09H9a.5.5 0 0 1-.478-.647L9.89 2.41 4.157 8.5z"/></svg>
            </button>`;
            finalPostStr += currentPost;
    }
    postsDiv.innerHTML = finalPostStr;
}
xhr.send()
</script>

{% endblock content %}